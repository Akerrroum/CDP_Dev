<% if(typeof project.sprints == 'undefined' || project.sprints.length == 0) { %>
    <div class="card-header">Sprints</div>
    <div class="card-body">
        <h5 class="card-title">Vous n'avez pas de sprints.</h5>
        <form action="/project/<%= project.id %>/createSprint" method="GET">
            <button type="submit" class="btn btn-outline-primary">Créer un nouveau sprint</button>
        </form>
    </div>
<%} else {%>
    <h2 class="card-header">Liste des sprints</h2>

    <% project.sprints.forEach(function (sprint) { %>
        <div class="jumbotron">
            <h3 class="display-5">
                <%= sprint.name %>
                <small><a href="/project/<%= project.id %>/modifySprint/<%= sprint.id %>"><i class="fas fa-edit fa-lg"></i></a></small>
                <small><a href="/project/<%= project.id %>/deleteSprint/<%= sprint.id %>"><i class="fas fa-trash fa-lg"></i></a></small>
            </h3>
            
            <p class="lead">Date de début : <%= moment(sprint.startDate).format( 'DD MMM YYYY') %></p>
            <p class="lead">Date de fin : <%= moment(sprint.endDate).format( 'DD MMM YYYY') %></p>
            <hr class="my-4">
            <% if (sprint.userStories.length == 0) { %>
                <p class="lead">Ce sprint n'a pas de user stories associées.</p>
            <%} else {%>
                <p class="lead">Liste des user stories du sprint :</p>
                <p>
                    <% sprint.userStories.forEach(function (us) { %>
                        <%= us.description %>
                        <a href="/project/<%= project.id %>/editUserStory/<%= us.id %>"><i class="fas fa-edit fa-lg"></i></a>
                        <a href="/project/<%= project.id %>/deleteUserStory/<%= us.id %>"><i class="fa fa-trash fa-lg" aria-hidden="true"></i></a>   
                    <% }); %>
                </p>
            <%}%>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalUserStories">
            Ajouter des user stories
            </button>
        </div>

        <div class="modal" id="modalUserStories">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Liste des user stories disponibles</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Modal body text goes here.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Save changes</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

    <% });%>

    <form action="/project/<%= project.id %>/createSprint" method="GET">
        <button type="submit" class="btn btn-secondary">Créer un nouveau sprint</button>
    </form>
<%}%>